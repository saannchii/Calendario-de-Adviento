<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Calendario de Adviento üéÅ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Manifest PWA -->
    <link rel="manifest" href="manifest.json">

    <!-- Iconos (√∫tiles para iOS y PWA) -->
    <link rel="apple-touch-icon" href="img/icon-192.png">

    <link rel="stylesheet" href="calendario.css" />

    <!-- OneSignal Web Push (rellena TU APP ID despu√©s) -->
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>
    <script>
      window.OneSignal = window.OneSignal || [];
      OneSignal.push(function() {
        OneSignal.init({
          appId: "TU-APP-ID-DE-ONESIGNAL",     // ‚¨ÖÔ∏è cambia esto en OneSignal
          safari_web_id: "TU-SAFARI-WEB-ID",   // ‚¨ÖÔ∏è opcional para Safari, si te lo da
          notifyButton: { enable: false }
        });
      });
    </script>
</head>
<body>
<div class="app">

    <!-- VISTA CALENDARIO -->
    <section class="view view-calendar view-active" id="viewCalendar">
        <div class="container">
            <div class="calendar-header">
                <h1>Calendario de Adviento üéÑ</h1>
                <div class="calendar-header-right">
                    <!-- Bot√≥n para activar recordatorio diario -->
                    <button class="header-btn" id="notifyBtn">Activar recordatorio diario</button>

                    <!-- Bot√≥n modo desarrollador (ya lo ten√≠as) -->
                    <button class="header-btn dev-btn" id="devBtn">Modo desarrollador</button>
                </div>
            </div>

            <p class="subtitle">
                Solo se revela el regalo del d√≠a que toques. Luego podr√°s volver atr√°s para ver el calendario completo.
            </p>

            <p class="info" id="dateInfo"></p>
            <p class="legend">üéâ = acertado ¬∑ üëÄ = abierto ¬∑ üîí = bloqueado</p>

            <div class="grid" id="daysGrid"></div>
        </div>
    </section>

    <!-- VISTA DETALLE DEL D√çA -->
    <section class="view view-day" id="viewDay">
        <div class="container container-day">
            <header class="day-header">
                <button class="back-btn" id="backBtn">‚¨Ö Volver al calendario</button>
                <div class="day-header-title">
                    <h2 id="dayTitle">D√≠a X</h2>
                    <p class="day-subtitle" id="dayStatus"></p>
                </div>
            </header>

            <div class="clue-box">
                <h3 class="clue-title">Pistas del regalo</h3>
                <ul class="clue-list" id="clueList"></ul>
            </div>

            <div class="guess-box">
                <p class="guess-title" id="guessTitle">
                    Tienes 3 intentos para adivinar qu√© hay dentro.
                </p>

                <form class="guess-form" id="guessForm">
                    <input
                            type="text"
                            id="guessInput"
                            placeholder="Escribe aqu√≠ tu apuesta..."
                            autocomplete="off"
                    />
                    <button type="submit" id="guessButton">Enviar intento</button>
                </form>

                <div class="guess-info" id="guessInfo"></div>
                <p class="small">
                    Cada fallo revela una pista adicional, un poquito m√°s clara‚Ä¶ pero sin decirlo todo.
                </p>
            </div>
        </div>
    </section>

    <!-- VISTA FINAL D√çA 24 -->
    <section class="view view-final" id="viewFinal">
        <div class="container container-final">
            <div class="final-layout">
                <!-- Texto -->
                <div class="final-inner">
                    <h2>Has llegado al final del calendario, mi amor ‚ù§Ô∏è</h2>
                    <p class="final-text">
                        Ya hemos llegado al final del calendario mi amor. Quiero que sepas que todo esto me hace una ilusi√≥n incre√≠ble,
                        me hace much√≠sima ilusi√≥n todo lo que estamos construyendo y todo lo que te implique a ti en mi vida.
                        <br><br>
                        Me haces la persona m√°s feliz del mundo y de verdad te lo digo, el conocerte, ha sido lo mejor que me ha podido pasar.
                        Ojal√° poder seguir toda la vida haciendo este tipo de cosas contigo, me siento tan feliz y afortunado que es algo que ni puedo explicar.
                        <br><br>
                        Mil gracias por ser como eres conmigo, mil gracias por todo lo que haces por m√≠ y en general, mil gracias por estar en mi vida.
                        <br><br>
                        Feliz Navidad mi vida, por nuestra primera Navidad como novios y por todas las que quedan.
                        <br><br>
                        Te amo con todo mi ser Victoria üêßüíö
                    </p>
                    <button class="modal-btn" id="finalBackBtn">Volver al calendario</button>
                </div>

                <!-- Cuadro con secuencia de fotos y v√≠deos -->
                <aside class="final-media-card">
                    <div class="final-media-frame">
                        <img
                                id="finalImage"
                                class="final-media final-media-active"
                                src="img/final1.jpeg"
                                alt="Recuerdo especial"
                        />
                        <video
                                id="finalVideo"
                                class="final-media"
                                muted
                                playsinline
                        ></video>
                    </div>
                </aside>
            </div>
        </div>
    </section>

    <!-- V√çDEO DE NIEVE DE FONDO (siempre activo) -->
    <video id="snowVideo" class="snow-video" muted autoplay loop playsinline>
        <source src="video/nieve.mp4" type="video/mp4" />
    </video>

    <!-- MODAL FINAL CUANDO FALLA LOS 3 INTENTOS (d√≠as 1‚Äì23) -->
    <div class="modal-backdrop hidden" id="endModalBackdrop">
        <div class="modal">
            <h3>Hasta aqu√≠ has llegado üéÅ</h3>
            <p class="modal-text">
                Creo que ni te haces una idea de lo que es‚Ä¶<br/>
                Mejor abre el regalo y espero de verdad que te encante. üíñ
            </p>
            <button class="modal-btn" id="endModalCloseBtn">Volver al calendario</button>
        </div>
    </div>

    <!-- MODAL DE ACIERTO (d√≠as 1‚Äì23) -->
    <div class="modal-backdrop hidden" id="successModalBackdrop">
        <div class="modal">
            <h3>¬°Has dado en el clavo! üéâ</h3>
            <p class="modal-text">
                Dir√≠a que te haces bastante idea de lo que es‚Ä¶<br/>
                Ahora solo queda esperar al momento perfecto para abrirlo. ‚ú®
            </p>
            <button class="modal-btn" id="successModalCloseBtn">Volver al calendario</button>
        </div>
    </div>

    <!-- MODAL DE MODO DESARROLLADOR -->
    <div class="modal-backdrop hidden" id="devModalBackdrop">
        <div class="modal">
            <h3>Modo desarrollador</h3>
            <p class="modal-text">
                Introduce la contrase√±a para desbloquear todos los d√≠as y poder probar el calendario.
            </p>
            <input
                    type="password"
                    id="devPasswordInput"
                    class="modal-input"
                    placeholder="Contrase√±a"
            />
            <div class="modal-actions">
                <button class="modal-btn secondary" id="devCancelBtn">Cancelar</button>
                <button class="modal-btn" id="devConfirmBtn">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- AVISO SUPERIOR (toast) -->
    <div class="top-toast" id="topToast">
        Contrase√±a de desarrollador incorrecta
    </div>

</div>

<!-- M√öSICA DE FONDO (loop + crossfade en JS) -->
<audio id="bgMusic" preload="auto">
    <source src="audio/musica.mp3" type="audio/mpeg" />
</audio>

<script src="calendario.js"></script>
</body>
</html>
